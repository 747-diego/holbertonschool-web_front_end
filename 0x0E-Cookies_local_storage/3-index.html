<!DOCTYPE html>
<html lang="en" dir="ltr">

    <head>

        <meta charset="utf-8" />
        <title>Task 1</title>
        <!-- Latest Version JQuery CDN -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>

        <script type="application/javascript">
                // var para = document.createElement("P");
                // para.innerText = "Welcome Holberton!";
                // document.body.appendChild(para);

                // Cookie Dough 
                function setCookies() {
                    var cookie = document.cookie;
                    var TenDayExperation = "max-age=864000"
                    var firsName = document.getElementById("firstname").value;
                    var email = document.getElementById("email").value;

                    cookie = "firstname=" + firstName + ";" + TenDayExperation;
                    cookie = "email=" + email + ";" + TenDayExperation;
                }

                // Cookie Cutter 
                function showCookies() {
                    var CookieCutter = document.cookie;
                    var para = document.createElement("P");
                    para.appendChild(document.createTextNode("Cookies: " + CookieCutter));
                    document.body(appendChild(para));
                }

                // Grab the Cookie
                function getCookie(name) {
                    var cookieName = name + "=";
                    var cookie = document.cookie;
                    var theComponent = decodeURIComponent(cookie).split(';');
                    var Cookies = 0;
                    while (Cookies < theComponent.length) {
                        while (theComponent[idx].charAt(0) === " ") {
                            theComponent[idx].substring(1);
                        }
                        if (theComponent[idx].indexOf(name) === 0) {
                            NameLength = firstName.length;
                            ComponentLength = theComponent[idx].length;

                            return(theComponent[idx].substring(firstName))
                        }
                    }
                    return "";
                }

                function showForm() {
                    var sForm = document.getElementById("show-form");
                    sForm.style.display = "block";
                }

                function hideForm() {
                    var hForm = document.getElementById("show-form");
                    hForm.style.display = "none";
                }

                function deleteCookiesAndShowForm() {
                    var cookie = document.cookie;
                    cookie = "firstname=; email=; expires=Thu, 01 Jan 1970 00:00:00 UTC;";
                    document.getElementById('welcome-msg').remove();
                    showForm();
                }

                function showWelcomeMessageOrForm() {

                    var firstName = getCookie("firstname");
                    var email = getCookie("email");

                    document.createElement("h1").setAttribute("id", "welcome-msg");
                    document.createElement("h1").innerText = `Welcome ${firstName}`;
                    document.createElement("a").innerText = "(logout)";
                    document.createElement("a").setAttribute("onclick", "deleteCookiesAndShowForm()");
                    document.createElement("h1").appendChild(document.createElement("a"));
                    
                    if (firstName && email) {
                        var body = document.body;
                        hideForm();
                        body.appendChild(document.createElement('h1'));
                    } else {
                        showForm();
                    }
                }
                showWelcomeMessageOrForm();
        </script>

    </head>

    <body>

        <div>
            <h2> TASK 3. Delete cookie and mini application </h2>
            <input id="firstname" type="text" placeholder="Firstname">
            <input id="email" type="text" placeholder="Email">

            <button onclick="setCookies()">
                Log me in
            </button>
        </div>

    </body>

</html>
